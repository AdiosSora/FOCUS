<!DOCTYPE>
<html>

<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <script type="text/javascript" src="/eel.js"></script>
  <script src="../js/Recognize.js"></script>
  <link rel="stylesheet" type="text/css" href="../css/style.min.css">
  <link rel="stylesheet" type="text/css" href="../css/pure.css">

</head>

<body>
<div class="big" style="margin:0px 20px;">
  <h2 class="conf_h2">マウス感度設定</h2>
  <p class="detail_text">青いバーを動かすことで感度の設定が出来ます。<br>
    遅いに近いほど細かい操作がしやすくなり、早いに近いほど少しの動作で画面全体の操作が出来ます。</p>
  <div class="range-slider">
    <span id="rs-bullet" class="rs-label" style="margin-top:0px">0</span>
    遅い　<input id="rs-range-line" class="rs-range" type="range" value="0" min="0" max="10">　速い
  </div>
  <br/>
  <h2 class="conf_h2">ショートカット設定</h2>
  <p class="detail_text">
    グーの状態で上下左右に動かすと、対応したショートカットが実行されます。<br/>
    実行するショートカットは下のプルダウンから設定することが出来ます。
  </p>
  <div class="gesture_area">
    <div class="gesture_box">
      Top<br/>
      <div class="dropdown">
        <select name="keyconfig" id="keyconfig" class="dropdown-select">
          <option value="ctrl,c">Ctl+C(コピー)</option>
          <option value="ctrl,s">Ctl+S(保存)</option>
          <option value="ctrl,v">Ctl+V(ペースト)</option>
          <option value="ctrl,x">Ctl+X(切り取り)</option>
          <option value="ctrl,y">Ctl+Y(戻るをやり直す)</option>
          <option value="ctrl,z">Ctl+Z(戻る)</option>
          <option value="alt,f4">Alt+F4(ウィンドウ削除)</option>
          <option value="win,tab">Win+Tab(タスクビュー)</option>
          <option value="ctrl,shift,esc">タスクマネージャー</option>
          <option value="win,up">Win+↑(ウィンドウ最大化)</option>
          <option value="win,down">Win+↓(ウィンドウ最小化)</option>
        </select>
      </div>
    </div>
    <div class="gesture_box">
      Left<br/>
      <div class="dropdown">
        <select name="keyconfig4" id="keyconfig4" class="dropdown-select">
        <option value="ctrl,c">Ctl+C(コピー)</option>
        <option value="ctrl,s">Ctl+S(保存)</option>
        <option value="ctrl,v">Ctl+V(ペースト)</option>
        <option value="ctrl,x">Ctl+X(切り取り)</option>
        <option value="ctrl,y">Ctl+Y(戻るをやり直す)</option>
        <option value="ctrl,z">Ctl+Z(戻る)</option>
        <option value="alt,f4">Alt+F4(ウィンドウ削除)</option>
        <option value="win,tab">Win+Tab(タスクビュー)</option>
        <option value="ctrl,shift,esc">タスクマネージャー</option>
        <option value="win,up">Win+↑(ウィンドウ最大化)</option>
        <option value="win,down">Win+↓(ウィンドウ最小化)</option>
      </select>
      </div>
    </div>
    <div class="gesture_box">
      Bottom<br/>
      <div class="dropdown">
        <select name="keyconfig3" id="keyconfig3" class="dropdown-select">
        <option value="ctrl,c">Ctl+C(コピー)</option>
        <option value="ctrl,s">Ctl+S(保存)</option>
        <option value="ctrl,v">Ctl+V(ペースト)</option>
        <option value="ctrl,x">Ctl+X(切り取り)</option>
        <option value="ctrl,y">Ctl+Y(戻るをやり直す)</option>
        <option value="ctrl,z">Ctl+Z(戻る)</option>
        <option value="alt,f4">Alt+F4(ウィンドウ削除)</option>
        <option value="win,tab">Win+Tab(タスクビュー)</option>
        <option value="ctrl,shift,esc">タスクマネージャー</option>
        <option value="win,up">Win+↑(ウィンドウ最大化)</option>
        <option value="win,down">Win+↓(ウィンドウ最小化)</option>
      </select>
      </div>
    </div>
    <div class="gesture_box">
      Right<br/>
      <div class="dropdown">
        <select name="keyconfig2" id="keyconfig2" class="dropdown-select">
          <option value="ctrl,c">Ctl+C(コピー)</option>
          <option value="ctrl,s">Ctl+S(保存)</option>
          <option value="ctrl,v">Ctl+V(ペースト)</option>
          <option value="ctrl,x">Ctl+X(切り取り)</option>
          <option value="ctrl,y">Ctl+Y(戻るをやり直す)</option>
          <option value="ctrl,z">Ctl+Z(戻る)</option>
          <option value="alt,f4">Alt+F4(ウィンドウ削除)</option>
          <option value="win,tab">Win+Tab(タスクビュー)</option>
          <option value="ctrl,shift,esc">タスクマネージャー</option>
          <option value="win,up">Win+↑(ウィンドウ最大化)</option>
          <option value="win,down">Win+↓(ウィンドウ最小化)</option>
        </select>
      </div>
    </div>
    <img class="gesture_img" src="../images/arrow_all.png">
  </div>
  <a class="pure-button pure-button-primary" onclick="saveConfigValue()">保存</a>
  <input type='checkbox' id='shortcut' name="checkbox_conf" class="checkbox" />
  <label for="shortcut" class="checkbox_conf">ショートカットキー有効化</label>
</div>
</body>



<script>
  //スライダー設定
  const rangeSlider = document.getElementById("rs-range-line");
  const rangeBullet = document.getElementById("rs-bullet");
  const keyselect = document.getElementById("keyconfig");
  const keyselect2 = document.getElementById("keyconfig2");
  const keyselect3 = document.getElementById("keyconfig3");
  const keyselect4 = document.getElementById("keyconfig4");
  const keybox = document.getElementById("shortcut");

  rangeSlider.addEventListener("input", showSliderValue, false);

  function showSliderValue() {
    rangeBullet.innerHTML = rangeSlider.value;
    var bulletPosition = (rangeSlider.value / rangeSlider.max);
    rangeBullet.style.left = (bulletPosition * 578) + "px";
  }

  //ページリンク関数
  function link(target) {
    window.location.href = target;
  }

  setTimeout(setConfvalue(), 50);
  //起動時設定ファイルの値をロード
  eel.expose(setConfvalue);
  function setConfvalue() {
    var mouse_sensitivity = Promise.resolve(eel.set_confvalue()());
    mouse_sensitivity.then(function(data) {
      rangeSlider.value = data
      rangeBullet.innerHTML = data
      rangeBullet.style.left = ((data / rangeSlider.max) * 578) + "px";
      });
    var keyset1 = Promise.resolve(eel.set_poseshortcut()());
    keyset1.then(function(data){
      keyselect.value = data
    });
    var keyset2 = Promise.resolve(eel.set_poseshortcut2()());
    keyset2.then(function(data){
      keyselect2.value = data
    });
    var keyset3 = Promise.resolve(eel.set_poseshortcut3()());
    keyset3.then(function(data){
      keyselect3.value = data
    });
    var keyset4 = Promise.resolve(eel.set_poseshortcut4()());
    keyset4.then(function(data){
      keyselect4.value = data
    });
    var key_flag = Promise.resolve(eel.set_shortcutflag()());
    key_flag.then(function(data){
      if(data==0){
        shortcut.checked = false;
      }else{
        shortcut.checked = true;
      }
    });

  };
  //設定した値をコンフィグに書き込む関数
  eel.expose(saveConfigValue);
  function saveConfigValue() {
    eel.save_confvalue(rangeSlider.value,keyconfig.value,keyconfig2.value,keyconfig3.value,keyconfig4.value);
    if(shortcut.checked){
      eel.save_shortcutflag("1");
    }else{
      eel.save_shortcutflag("0");
    }
  }

</script>

</html>
