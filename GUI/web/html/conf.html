<!DOCTYPE>
<html>

<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <script type="text/javascript" src="/eel.js"></script>
  <script src="../js/Recognize.js"></script>
  <link rel="stylesheet" type="text/css" href="../css/style.min.css">
  <link rel="stylesheet" type="text/css" href="../css/pure.css">

</head>

<body>
<div class="big">
  <h2>マウス感度設定</h2>
  <p class="detail_text">遅いに近いほど細かい操作がしやすくなり、早いに近いほど少しの動作で画面全体の操作が出来ます。</p>
  <div class="range-slider">
    <span id="rs-bullet" class="rs-label">0</span>
    遅い　<input id="rs-range-line" class="rs-range" type="range" value="0" min="0" max="10">　速い
  </div>
  <h2>ポーズ設定</h2>
  <p class="detail_text">
    ポーズを入れ替えることでマウスの操作に対するポーズを変更することが出来ます。<br>
    手のアイコンをドラッグドロップすることで入れ替えることができます。
  </p>
  <br>
  <!-- <div class="PoseSettinglist">
    <div id="PoseList" class="listWithHandle">
      <div class="drag_palm"><img src="../images/Hand_Palm.svg" width="46px"></div>
      <div class="drag_rock"><img src="../images/Hand_Rock.svg" width="46px"></div>
      <div class="drag_gun"><img src="../images/Hand_Gun.svg" width="46px"></div>
      <div class="drag_three"><img src="../images/Hand_Three.svg" width="46px"></div>
      <div class="drag_peace"><img src="../images/Hand_Peace.svg" width="46px"></div>
      <div class="drag_dang"><img src="../images/Hand_Dang.svg" width="46px"></div>
      <div class="drag_one"><img src="../images/Hand_One.svg" width="46px"></div>
    </div>
    <div class="listlabel">
      <div>移動</div>
      <div>左クリック</div>
      <div>右クリック</div>
      <div>ダブルクリック</div>
      <div>ドラッグ<br>ドロップ</div>
      <div>1<br/>ショートカット</div>
      <div>2<br/>ショートカット</div>
    </div>
  </div> -->
  <div>
    oneのポーズ
    <select name="keyconfig" id="keyconfig">
      <option value="ctrl,c">Ctl+C</option>
      <option value="ctrl,s">Ctl+S</option>
      <option value="ctrl,v">Ctl+V</option>
      <option value="ctrl,x">Ctl+X</option>
      <option value="ctrl,y">Ctl+Y</option>
      <option value="ctrl,z">Ctl+Z</option>
      <option value="alt,f4">Alt+F4</option>
      <option value="alt,tab">Alt+Tab</option>
    </select>
    <p></p>
    dangのポーズ
    <select name="keyconfig2" id="keyconfig2">
      <option value="ctrl,c">Ctl+C</option>
      <option value="ctrl,s">Ctl+S</option>
      <option value="ctrl,v">Ctl+V</option>
      <option value="ctrl,x">Ctl+X</option>
      <option value="ctrl,y">Ctl+Y</option>
      <option value="ctrl,z">Ctl+Z</option>
      <option value="alt,f4">Alt+F4</option>
      <option value="alt,tab">Alt+Tab</option>
    </select>
    <p></p>
    ショートカットキー有効化<input type='checkbox' id='shortcut' class="checkbox" />
  </div>
  <div>
    <!-- <a class="pure-button pure-button-primary" href="#" onclick="saveConfigValue()">適用</a> -->
    <div class="modal_wrap">
    <input id="trigger" type="checkbox">
      <div class="modal_overlay">
        <label for="trigger" class="modal_trigger"></label>
        <div class="modal_content">
          <label for="trigger" class="close_button">✖️</label>
          <h4 style="text-align:center;">設定を適応しました。</h4>
        </div>
      </div>
    </div>
  </div>
  <a class="pure-button pure-button-primary" onclick="saveConfigValue()">保存</a>
</div>

</body>



<script>
  //スライダー設定
  const rangeSlider = document.getElementById("rs-range-line");
  const rangeBullet = document.getElementById("rs-bullet");
  const keyselect = document.getElementById("keyconfig");
  const keyselect2 = document.getElementById("keyconfig2");
  const keybox = document.getElementById("shortcut");

  rangeSlider.addEventListener("input", showSliderValue, false);

  function showSliderValue() {
    rangeBullet.innerHTML = rangeSlider.value;
    var bulletPosition = (rangeSlider.value / rangeSlider.max);
    rangeBullet.style.left = (bulletPosition * 578) + "px";
  }

  //ページリンク関数
  function link(target) {
    window.location.href = target;
  }

  setTimeout(setConfvalue(), 50);
  //起動時設定ファイルの値をロード
  eel.expose(setConfvalue);
  function setConfvalue() {
    var mouse_sensitivity = Promise.resolve(eel.set_confvalue()());
    mouse_sensitivity.then(function(data) {
      rangeSlider.value = data
      rangeBullet.innerHTML = data
      rangeBullet.style.left = ((data / rangeSlider.max) * 578) + "px";
      });
    var keyset1 = Promise.resolve(eel.set_poseshortcut()());
    keyset1.then(function(data){
      keyselect.value = data
    });
    var keyset2 = Promise.resolve(eel.set_poseshortcut2()());
    keyset2.then(function(data){
      keyselect2.value = data
    });
    var key_flag = Promise.resolve(eel.set_shortcutflag()());
    key_flag.then(function(data){
      if(data==0){
        shortcut.checked = false;
      }else{
        shortcut.checked = true;
      }
    });

  };
  //設定した値をコンフィグに書き込む関数
  eel.expose(saveConfigValue);
  function saveConfigValue() {
    eel.save_confvalue(rangeSlider.value,keyconfig.value,keyconfig2.value);
    if(shortcut.checked){
      eel.save_shortcutflag("1");
    }else{
      eel.save_shortcutflag("0");
    }
  }

</script>

</html>
